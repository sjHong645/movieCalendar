## 🎬 프로그램 설계 명세서: 개인 맞춤형 영화 시간표 자동 생성기

### **1. 개요 (Overview)**

#### **1.1. 프로그램 목표**

개인 사용자를 위해, 여러 영화관의 상영 시간표 정보를 취합하고, 이동 시간까지 고려하여 시간이 겹치지 않는 최적의 주간 관람 시간표를 효율적으로 생성 및 관리하는 것을 목표로 한다.

#### **1.2. 주요 사용자**

프로그램을 공유하여 사용하는 **여러 명의 개인 사용자**. 각 사용자는 자신만의 영화 목록, 시간표, 이동 시간 데이터를 독립적으로 관리한다.

#### **1.3. 해결 과제**

  * 여러 영화관 사이트를 일일이 확인하는 정보 취합의 번거로움 해소
  * 상영 시간, 이동 시간을 고려한 복잡한 시간표 수동 작성의 비효율성 개선
  * 사용자별로 다른 이동 시간 및 스케줄을 독립적으로 관리

-----

### **2. 핵심 기능 (Core Features)**

1.  **'보고 싶은 영화' 목록 관리:** 사용자가 관람을 원하는 영화 목록을 추가/삭제/조회한다.
2.  **상영 정보 자동 수집 (웹 크롤링):** 주요 영화관 사이트에서 특정 영화의 상영관, 위치, 시작 시간, 러닝타임 정보를 자동으로 수집한다. (개발 후반부 구현)
3.  **'내 시간표'에 영화 추가:** 수집된 상영 정보 중 원하는 것을 선택하면, **사용자별로 저장된 이동 시간**을 고려하여 기존 시간표와 **시간이 겹치는지 자동으로 검사**한 후 개인 시간표에 추가한다.
4.  **최종 '주간 시간표' 조회:** 완성된 개인의 주간 영화 시간표를 한눈에 보기 좋은 형태로 출력한다.

-----

### **3. 기술 명세 (Technical Specifications)**

#### **3.1. 사용자 인터페이스 (User Interface)**

  * **CLI (Command Line Interface):** 텍스트 기반의 명령어로 프로그램을 조작한다.

#### **3.2. 필요 라이브러리 (Required Libraries)**

  * `json`: 사용자별 데이터 파일(시간표, 이동 시간 등)을 저장하고 불러온다.
  * `datetime`: 시간 충돌 검사를 위한 날짜 및 시간 계산에 사용한다.
  * `os`: 사용자별 데이터 파일의 존재 유무를 확인한다.
  * `requests`, `BeautifulSoup4`: (추후) 웹 크롤링 기능 구현 시 사용한다.

#### **3.3. 데이터 구조 (Data Structures)**

  * **보고 싶은 영화 목록 (`movies_to_watch`)**:
    ```python
    ['듄: 파트2', '파묘']
    ```
  * **수집된 상영 정보 (`crawled_showtimes`)**:
    ```python
    [
      {'title': '파묘', 'theater': 'CGV 용산', 'location': '용산', 'start_time': '14:30', 'runtime': 134},
      {'title': '듄: 파트2', 'theater': '메가박스 코엑스', 'location': '코엑스', 'start_time': '18:00', 'runtime': 166}
    ]
    ```
  * **사용자별 이동 시간 (`travel_times`)**: **'학습형 사전' 방식**으로 관리. 프로그램이 필요 시 사용자에게 질문하여 얻은 답변을 저장하며, 초깃값은 빈 딕셔너리(`{}`)이다.
    ```python
    # 사용자와의 상호작용 후 채워지는 데이터 예시
    {'용산': {'코엑스': 45}, '코엑스': {'용산': 45}}
    ```
  * **나의 최종 주간 시간표 (`my_schedule`)**:
    ```python
    {
      '화요일': [{'title': '파묘', 'theater': 'CGV 용산', 'location': '용산', 'start_time': '14:30', 'runtime': 134}]
    }
    ```

#### **3.4. 데이터 영속성 (Data Persistence)**

  * 모든 데이터는 사용자별로 분리된 **JSON 파일**에 저장된다.
  * 파일명 형식: `[사용자이름]_schedule.json`, `[사용자이름]_travel_times.json`

-----

### **4. 프로그램 구조 (Program Architecture)**

  * **`ScheduleManager` 클래스**를 중심으로 객체 지향 방식으로 설계한다.

<!-- end list -->

```python
import os
import json
from datetime import datetime

class ScheduleManager:
    def __init__(self):
        self.current_user = None
        self.movies_to_watch = []
        self.crawled_showtimes = []
        self.my_schedule = {}
        self.travel_times = {}

    def select_user(self):
        # 사용자 이름을 입력받아 self.current_user 설정 및 데이터 로드
        pass

    def load_user_data(self):
        # self.current_user를 기반으로 파일에서 모든 데이터를 로드
        pass

    def save_user_data(self):
        # self.current_user를 기반으로 파일에 모든 데이터를 저장
        pass

    def get_travel_time(self, start_loc, end_loc):
        # self.travel_times에 정보가 없으면 사용자에게 질문 후 저장
        pass

    def add_to_my_schedule(self):
        # get_travel_time을 활용하여 시간 충돌 검사 후 시간표에 영화 추가
        pass
    
    def crawl_showtimes(self):
        # (추후 구현) 웹 크롤링 기능
        pass

    def display_schedule(self):
        # 최종 시간표를 보기 좋게 출력
        pass
    
    def run(self):
        # 전체 프로그램의 메인 루프
        pass
```

-----

### **5. 개발 계획 (Development Roadmap)**

  * **v0.1 (핵심 기능 구현):** `ScheduleManager` 클래스 기본 구조를 만들고, 사용자 구분 없이 수동으로 시간표를 추가/조회하는 기능 구현 (데이터는 메모리에만 저장).
  * **v0.2 (사용자 시스템 및 파일 저장):** 사용자 선택 및 사용자별 데이터 파일 저장/로드 기능 구현.
  * **v0.3 (핵심 로직 - 시간 충돌 검사):** `datetime`과 '학습형 이동 시간' 로직을 이용한 정교한 시간 충돌 검사 기능 구현.
  * **v0.4 (자동화 - 웹 크롤링):** 영화 상영 정보를 자동으로 수집하는 `crawl_showtimes` 기능 구현.
  * **v1.0 (완성 및 다듬기):** CLI 출력 화면 개선 및 사용자 입력 오류 처리 등 완성도 향상.